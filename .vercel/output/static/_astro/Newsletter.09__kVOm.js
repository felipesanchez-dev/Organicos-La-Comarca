import{i as C,r as h,f as b,a as _,c as w,b as t,t as l,d as B,j as u,n as g,x as L,e as O,m as U,k as z,w as T,q as c}from"./index.PXxL51Wy.js";import{t as n}from"./translate.B06VLW-j.js";import{s as y}from"./store.D9UzEAUg.js";import{u as N,L as q}from"./Loading.Dn9e7L4o.js";/* empty css                        */import{_ as A}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{u as V}from"./index.CxR5AyqT.js";import"./index.D_RYY94p.js";const F={__name:"Newsletter",props:{data:{type:Object},provider:{type:String,default:"mailchimp"}},setup(p,{expose:a}){a();const o=V(y),e=p,s=C({email:"",name:""}),m={email:[{type:"email",required:!0}]},{pass:r,isFinished:v,errorFields:j}=N(s,m),D=n("subscribe"),x=h(!1),d=h(!1),f=()=>{y.set({type:o.value.type,slug:o.value.slug,show:!1})},M=b(()=>!d.value&&v.value&&r.value),k=b(()=>({email:s.email,first_name:s.name,last_name:s.last_name,type:o.value.type,tags:e.data.tags,list:e.data.id,include_main_list:x.value,status:e.data.status})),S={$showDialog:o,props:e,form:s,rules:m,pass:r,isFinished:v,errorFields:j,label:D,subscribeNewsletter:x,loading:d,hide:f,canSubmit:M,formData:k,submit:()=>{e.provider==="mailchimp"&&(d.value=!0,fetch("/api/newsletter/mailchimp",{method:"POST",body:JSON.stringify(k.value),headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{i.status==="pending"?(c.success(e.data?.thanks?e.data.thanks:n("newsletter_thanks")),f(),s.email="",s.name="",s.last_name=""):i.status==="subscribed"?(c.info(e.data?.thanks?e.data.thanks:n("newsletter_already_subscribed")),f(),s.email="",s.name="",s.last_name=""):c.error(n("newsletter_error"))}).catch(i=>{c.error(n("newsletter_error"))}).finally(()=>{d.value=!1}))},ref:h,watch:T,reactive:C,computed:b,get t(){return n},get useStore(){return V},get showDialog(){return y},get useAsyncValidator(){return N},Loading:q,get toast(){return c}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}},P={class:"pb-8"},E={class:"subtitle balance"},H={class:"input-group"},J={class:"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-primary"},G={class:"input-group"},I={class:"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-primary"},K={class:"input-group"},Q={class:"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-primary"},R={class:"flex w-full justify-between gap-4"},W={key:0,class:"inline-flex items-center"},X={class:"relative -ml-4 flex cursor-pointer items-center rounded-full p-3",for:"terms-and-conditions","data-ripple-dark":"true"},Y=t("div",{class:"pointer-events-none absolute left-2/4 top-2/4 -translate-x-2/4 -translate-y-2/4 text-white opacity-0 transition-opacity peer-checked:opacity-100"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor","stroke-width":"1"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),Z={class:"mt-px cursor-pointer select-none text-xs",for:"terms-and-conditions"},$={class:"flex justify-end"},ee=["disabled"],te={class:"-mr-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve",style:{"enable-background":"new 0 0 12 12"},viewBox:"0 0 12 12"},se=t("g",{class:"-translate-x-[20%] transition-transform duration-300 group-hover:translate-x-0"},[t("path",{d:"M9.2 6.4 6.4 9.1c-.1.1-.1.4 0 .5s.4.1.5 0l3.4-3.4c.1-.1.1-.4 0-.5L7 2.4c-.1-.1-.4-.1-.5 0-.1.1-.1.4 0 .5l2.7 2.7c.4.4.4.4 0 .8z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.5"}),t("g",null,[t("path",{class:"origin-right -translate-x-[8%] scale-x-0 transition-transform duration-300 group-hover:scale-x-75",d:"M9.6 5.6H1.9c-.2 0-.3.2-.3.4s.2.4.4.4h7.7c.2 0 .4-.2.4-.4s-.3-.4-.5-.4z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.5"})])],-1),ae=[se];function re(p,a,o,e,s,m){return _(),w("form",{onSubmit:z(e.submit,["prevent"]),class:"grid gap-4"},[t("div",P,[t("h2",E,l(o.data?.title),1),B(p.$slots,"content")]),t("div",H,[u(t("input",{type:"text",name:"name",placeholder:" ",class:"peer","onUpdate:modelValue":a[0]||(a[0]=r=>e.form.name=r)},null,512),[[g,e.form.name]]),t("label",J,l(e.t("name"))+" *",1)]),t("div",G,[u(t("input",{type:"text",name:"last_name",placeholder:" ",class:"peer","onUpdate:modelValue":a[1]||(a[1]=r=>e.form.last_name=r)},null,512),[[g,e.form.last_name]]),t("label",I,l(e.t("last_name"))+" *",1)]),t("div",K,[u(t("input",{type:"email",name:"email",placeholder:" ",class:"peer","onUpdate:modelValue":a[2]||(a[2]=r=>e.form.email=r)},null,512),[[g,e.form.email]]),t("label",Q,l(e.t("email"))+" *",1)]),t("div",R,[t("div",null,[o.data.include_main_list&&o.data.id?(_(),w("div",W,[t("label",X,[u(t("input",{"onUpdate:modelValue":a[3]||(a[3]=r=>e.subscribeNewsletter=r),id:"terms-and-conditions",type:"checkbox",class:"before:content[''] border-blue-gray-800 before:bg-blue-gray-500 peer relative h-5 w-5 cursor-pointer appearance-none rounded-md border-2 transition-all before:absolute before:left-2/4 before:top-2/4 before:block before:h-12 before:w-12 before:-translate-x-2/4 before:-translate-y-2/4 before:rounded-full before:opacity-0 before:transition-opacity checked:border-primary checked:bg-primary checked:before:bg-primary hover:before:opacity-10"},null,512),[[L,e.subscribeNewsletter]]),Y]),t("label",Z,l(e.t("subscribe_to_newsletter")),1)])):O("",!0)]),t("div",$,[t("button",{class:"btn surface-primary group mb-auto ml-auto",type:"submit",disabled:!e.canSubmit},[t("span",null,l(e.t(e.label)),1),(_(),w("svg",te,ae))],8,ee)])]),U(e.Loading,{loading:e.loading},null,8,["loading"])],32)}const fe=A(F,[["render",re]]);export{fe as default};
