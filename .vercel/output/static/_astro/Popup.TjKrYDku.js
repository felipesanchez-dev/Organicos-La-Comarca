import{f as k,o as _,w as g,a as i,c as d,b as s,m as S,h as O,T,F as Z,q as x,u as C,d as f,t as F,e as y,A as I,k as q}from"./index.PXxL51Wy.js";import{t as B}from"./translate.B06VLW-j.js";import{a as u}from"./store.D9UzEAUg.js";import{c as P}from"./index.Cm2xnGYQ.js";import{d as N,e as z}from"./bodyScrollLock.esm.CT-oBNdc.js";/* empty css                        */import A from"./Newsletter.09__kVOm.js";import{_ as D}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{u as V}from"./index.CxR5AyqT.js";import{a as M}from"./index.D_RYY94p.js";import"./Loading.Dn9e7L4o.js";const E={__name:"Popup",props:{data:{type:Object},link:{type:String,default:"popup"},code:{type:String},className:{type:String,default:""},newsletter:{type:Object}},setup(l,{expose:t}){t();const{isSupported:r,copy:e}=P(),o=l,p=V(u),{counter:n,pause:c,resume:m,reset:v}=M(100,{controls:!0});c();const w=k(()=>100-(o.data.duration-n.value/10)/o.data.duration*100),j=()=>{e(o.code),x.success(B("promocode_copied"))},H=a=>{o.data.duration!==0&&(a?c():m())},h=()=>{u.set({type:p.value.type,show:!1})};_(()=>{o.data.delay===0&&(u.set({type:o.link,show:!0}),m()),o.data.delay>0&&setTimeout(()=>{u.set({type:o.link,show:!0}),m()},o.data.delay*1e3)}),g(p,a=>{a.show&&a.type===o.link?(v(),N(document.body)):!a.show&&a.type===o.link&&z(document.body)},{immediate:!1}),g(w,a=>{o.data.duration>0&&a>100&&(c(),h())},{immediate:!1});const b={isSupported:r,copy:e,props:o,$show:p,counter:n,pause:c,resume:m,reset:v,progress:w,doCopy:j,pauseProgress:H,hide:h,onMounted:_,watch:g,computed:k,get t(){return B},get useStore(){return V},get showPopup(){return u},get useInterval(){return M},get useClipboard(){return P},get disableBodyScroll(){return N},get enableBodyScroll(){return z},get toast(){return x},Newsletter:A};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},G=["data-popup"],J={slot:"content",class:"relative text-center"},K=["value"],L={key:0,class:"surface-secondary h-full rounded-r-lg px-4 py-3 text-xl shadow-lg"},Q=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5",viewBox:"0 0 256 256"},[s("path",{fill:"currentColor",d:"M184 64H40a8 8 0 0 0-8 8v144a8 8 0 0 0 8 8h144a8 8 0 0 0 8-8V72a8 8 0 0 0-8-8Zm-8 144H48V80h128Zm48-168v144a8 8 0 0 1-16 0V48H72a8 8 0 0 1 0-16h144a8 8 0 0 1 8 8Z"})],-1),R=[Q],U={key:1,class:"surface-base relative z-10 m-4 rounded p-4"};function W(l,t,r,e,o,p){return i(),d(Z,null,[s("div",{class:"hide","data-popup":r.link},null,8,G),S(T,{name:"fade"},{default:O(()=>[e.$show.show&&e.$show.type===e.props.link?(i(),d("div",{key:0,class:"bg-dark-blur popup pointer-events-auto fixed inset-0 grid w-full cursor-pointer place-items-center",onClick:t[5]||(t[5]=n=>e.hide())},[s("div",{onClick:t[2]||(t[2]=q(()=>{},["stop"])),class:"container-sm relative",onMouseenter:t[3]||(t[3]=n=>e.pauseProgress(!0)),onMouseleave:t[4]||(t[4]=n=>e.pauseProgress(!1))},[s("div",{class:C(["popup__content hide-scrollbar cursor-auto overflow-hidden rounded shadow-xl",r.className])},[s("div",J,[f(l.$slots,"content"),r.code?(i(),d("div",{key:0,class:C(["relative z-10 grid place-items-center",e.isSupported?"cursor-pointer":""])},[s("div",{onClick:t[0]||(t[0]=n=>e.doCopy()),class:"flex items-center"},[s("div",{disabled:"",class:"surface-base rounded-l-lg px-4 py-2 font-mono text-xl shadow-lg",value:r.code},F(r.code),9,K),e.isSupported?(i(),d("div",L,R)):y("",!0)])],2)):y("",!0),r.newsletter?(i(),d("div",U,[S(e.Newsletter,{data:r.newsletter},null,8,["data"])])):y("",!0),f(l.$slots,"buttons"),s("div",{class:"progress absolute inset-x-0 top-0 z-20",style:I(`--progress: ${e.progress}%`)},null,4),f(l.$slots,"image")])],2),s("button",{class:"btn btn-icon surface-dark btn-absolute -right-1 -top-1 z-50 grid h-10 w-10 place-items-center",onClick:t[1]||(t[1]=n=>e.hide())},[f(l.$slots,"close")])],32)])):y("",!0)]),_:3})],64)}const ie=D(E,[["render",W]]);export{ie as default};
